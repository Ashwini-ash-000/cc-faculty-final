<%- include('../../partials/head'); %>
<%- include('../../partials/header'); %>

    <div class="form-container">
        <h2>Submit Feedback</h2>
        <% if (errors && errors.length > 0) { %>
            <div class="alert alert-danger">
                <% errors.forEach(function(error) { %>
                    <p><%= error.msg %></p>
                <% }); %>
            </div>
        <% } %>
        <form action="/student/submit-feedback" method="POST">
            <div class="form-group">
                <label for="facultyId">Select Faculty:</label>
                <select id="facultyId" name="facultyId" class="form-control" required>
                    <option value="">-- Select Faculty --</option>
                    <% faculties.forEach(faculty => { %>
                        <option value="<%= faculty.id %>" <%= (typeof facultyId != 'undefined' && facultyId == faculty.id) ? 'selected' : '' %>>
                            <%= faculty.first_name %> <%= faculty.last_name %> (<%= faculty.designation %>)
                        </option>
                    <% }); %>
                </select>
            </div>
            <div class="form-group">
                <label for="rating">Rating (1-5):</label>
                <input type="number" id="rating" name="rating" class="form-control" min="1" max="5" value="<%= typeof rating != 'undefined' ? rating : '' %>" required>
            </div>
            <div class="form-group">
                <label for="comment">Comment:</label>
                <textarea id="comment" name="comment" class="form-control" rows="5" required><%= typeof comment != 'undefined' ? comment : '' %></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Submit Feedback</button>
            <a href="/student/dashboard" class="btn btn-secondary">Cancel</a>
        </form>
    </div>

<%- include('../../partials/footer'); %>